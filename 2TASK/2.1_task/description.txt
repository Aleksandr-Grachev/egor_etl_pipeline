Данный скрипт выполняет удаление только дубликатов, без оригинальных записей

Изначально находим с помощью CTE дублирующиеся записи
Сделано это с помощью оконной функции, которая нумерует записи по составному ключу (client_rk, effective_from_date), оригинальные записи находятся под номером 1,
если нумерация 2 и выше, то это дубликаты которые нужно удалить
После найденных дубликатов, удаляем записи по составному ключу (client_rk, effective_from_date) у которых номер > 1 (номер из оконной функции)
После этого в таблице останутся только оригинальные записи 